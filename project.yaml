version: '3.0'

expectations:

  population_size: 100000

actions:

  ## # # # # # # # # # # # # # # # # # # # 
  ## DO NOT EDIT project.yaml DIRECTLY 
  ## This file is created by create-project.R 
  ## Edit and run create-project.R to update the project.yaml 
  ## # # # # # # # # # # # # # # # # # # # 
  ## # # # # # # # # # # # # # # # # # # # 
  ## Pre-server scripts 
  ## # # # # # # # # # # # # # # # # # # # 
  ## # # # # # # # # # # # # # # # # # # # 
  ## Extract and tidy 
  ## # # # # # # # # # # # # # # # # # # # 

  extract:
    run: cohortextractor:latest generate_cohort --study-definition study_definition
      --output-format feather
    needs: []
    outputs:
      highly_sensitive:
        cohort: output/input.feather

  extract_report:
    run: cohort-report:v3.0.0 output/input.feather
    needs:
    - extract
    outputs:
      moderately_sensitive:
        html: output/data/reports/extract/*.html
        png: output/data/reports/extract/*.png
    config:
      output_path: output/data/reports/extract/

  data_process:
    run: r:latest analysis/data_process.R
    needs:
    - extract
    outputs:
      highly_sensitive:
        rds: output/data/data_processed.rds
        vaxlong: output/data/data_vaxlong.rds

  skim_process:
    run: r:latest analysis/data_skim.R output/data/data_processed.rds output/data_properties
    needs:
    - data_process
    outputs:
      moderately_sensitive:
        cohort: output/data_properties/data_processed*.txt

  data_process_long:
    run: r:latest analysis/data_process_long.R
    needs:
    - data_process
    outputs:
      highly_sensitive:
        processed: output/data/data_long*.rds

  data_selection:
    run: r:latest analysis/data_selection.R
    needs:
    - data_process
    outputs:
      highly_sensitive:
        data: output/data/data_cohort.rds
        feather: output/data/data_cohort.feather
      moderately_sensitive:
        flow: output/data/flowchart.csv

  skim_selection:
    run: r:latest analysis/data_skim.R output/data/data_cohort.rds output/data_properties
    needs:
    - data_selection
    outputs:
      moderately_sensitive:
        cohort: output/data_properties/data_cohort*.txt

  cohort_report:
    run: cohort-report:v3.0.0 output/data/data_cohort.feather
    needs:
    - data_selection
    outputs:
      moderately_sensitive:
        html: output/data/reports/cohort/*.html
        png: output/data/reports/cohort/*.png
    config:
      output_path: output/data/reports/cohort/

  ## # # # # # # # # # # # # # # # # # # # 
  ## Descriptive stats 
  ## # # # # # # # # # # # # # # # # # # # 

  descriptive_table1:
    run: r:latest analysis/table1.R
    needs:
    - data_selection
    outputs:
      moderately_sensitive:
        html: output/descriptive/table1/*.html
        csv: output/descriptive/table1/*.csv

  descriptive_vaxdate:
    run: r:latest analysis/vax_date.R
    needs:
    - data_selection
    outputs:
      moderately_sensitive:
        png: output/descriptive/vaxdate/*.png
        pdf: output/descriptive/vaxdate/*.pdf
        svg: output/descriptive/vaxdate/*.svg

  ## # # # # # # # # # # # # # # # # # # # 
  ## Matching 
  ## # # # # # # # # # # # # # # # # # # # 

  match_seqtrialcox_pfizer:
    run: r:latest analysis/match_seqtrialcox.R pfizer
    needs:
    - data_selection
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/match_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/match_*.txt
        csv: output/models/seqtrialcox/pfizer/match_*.csv
        png: output/models/seqtrialcox/pfizer/match_*.png
        pdf: output/models/seqtrialcox/pfizer/match_*.pdf

  merge_seqtrialcox_pfizer:
    run: r:latest analysis/merge_seqtrialcox.R pfizer
    needs:
    - match_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/merge_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/merge_*.txt
        csv: output/models/seqtrialcox/pfizer/merge_*.csv
        html: output/models/seqtrialcox/pfizer/merge_*.html

  match_seqtrialcox_moderna:
    run: r:latest analysis/match_seqtrialcox.R moderna
    needs:
    - data_selection
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/match_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/match_*.txt
        csv: output/models/seqtrialcox/moderna/match_*.csv
        png: output/models/seqtrialcox/moderna/match_*.png
        pdf: output/models/seqtrialcox/moderna/match_*.pdf

  merge_seqtrialcox_moderna:
    run: r:latest analysis/merge_seqtrialcox.R moderna
    needs:
    - match_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/merge_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/merge_*.txt
        csv: output/models/seqtrialcox/moderna/merge_*.csv
        html: output/models/seqtrialcox/moderna/merge_*.html

  ## # # # # # # # # # # # # # # # # # # # 
  ## Models 
  ## # # # # # # # # # # # # # # # # # # # 
  ## ###  Positive SARS-CoV-2 Test 

  model_seqtrialcox_pfizer_postest_none:
    run: r:latest analysis/model_seqtrialcox.R pfizer postest none
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/postest/none/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/postest/none/model_*.txt
        csv: output/models/seqtrialcox/pfizer/postest/none/model_*.csv

  report_seqtrialcox_pfizer_postest_none:
    run: r:latest analysis/report_seqtrialcox.R pfizer postest none
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_postest_none
    - match_seqtrialcox_pfizer_postest
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/postest/none/report_*.csv
        svg: output/models/seqtrialcox/pfizer/postest/none/report_*.svg
        png: output/models/seqtrialcox/pfizer/postest/none/report_*.png

  model_seqtrialcox_pfizer_postest_vax12_type-az-az:
    run: r:latest analysis/model_seqtrialcox.R pfizer postest vax12_type-az-az
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/postest/vax12_type-az-az/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/postest/vax12_type-az-az/model_*.txt
        csv: output/models/seqtrialcox/pfizer/postest/vax12_type-az-az/model_*.csv

  report_seqtrialcox_pfizer_postest_vax12_type-az-az:
    run: r:latest analysis/report_seqtrialcox.R pfizer postest vax12_type-az-az
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_postest_vax12_type-az-az
    - match_seqtrialcox_pfizer_postest
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/postest/vax12_type-az-az/report_*.csv
        svg: output/models/seqtrialcox/pfizer/postest/vax12_type-az-az/report_*.svg
        png: output/models/seqtrialcox/pfizer/postest/vax12_type-az-az/report_*.png

  model_seqtrialcox_pfizer_postest_vax12_type-moderna-moderna:
    run: r:latest analysis/model_seqtrialcox.R pfizer postest vax12_type-moderna-moderna
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/postest/vax12_type-moderna-moderna/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/postest/vax12_type-moderna-moderna/model_*.txt
        csv: output/models/seqtrialcox/pfizer/postest/vax12_type-moderna-moderna/model_*.csv

  report_seqtrialcox_pfizer_postest_vax12_type-moderna-moderna:
    run: r:latest analysis/report_seqtrialcox.R pfizer postest vax12_type-moderna-moderna
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_postest_vax12_type-moderna-moderna
    - match_seqtrialcox_pfizer_postest
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/postest/vax12_type-moderna-moderna/report_*.csv
        svg: output/models/seqtrialcox/pfizer/postest/vax12_type-moderna-moderna/report_*.svg
        png: output/models/seqtrialcox/pfizer/postest/vax12_type-moderna-moderna/report_*.png

  model_seqtrialcox_pfizer_postest_vax12_type-pfizer-pfizer:
    run: r:latest analysis/model_seqtrialcox.R pfizer postest vax12_type-pfizer-pfizer
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/postest/vax12_type-pfizer-pfizer/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/postest/vax12_type-pfizer-pfizer/model_*.txt
        csv: output/models/seqtrialcox/pfizer/postest/vax12_type-pfizer-pfizer/model_*.csv

  report_seqtrialcox_pfizer_postest_vax12_type-pfizer-pfizer:
    run: r:latest analysis/report_seqtrialcox.R pfizer postest vax12_type-pfizer-pfizer
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_postest_vax12_type-pfizer-pfizer
    - match_seqtrialcox_pfizer_postest
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/postest/vax12_type-pfizer-pfizer/report_*.csv
        svg: output/models/seqtrialcox/pfizer/postest/vax12_type-pfizer-pfizer/report_*.svg
        png: output/models/seqtrialcox/pfizer/postest/vax12_type-pfizer-pfizer/report_*.png

  model_seqtrialcox_moderna_postest_none:
    run: r:latest analysis/model_seqtrialcox.R moderna postest none
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/postest/none/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/postest/none/model_*.txt
        csv: output/models/seqtrialcox/moderna/postest/none/model_*.csv

  report_seqtrialcox_moderna_postest_none:
    run: r:latest analysis/report_seqtrialcox.R moderna postest none
    needs:
    - data_selection
    - model_seqtrialcox_moderna_postest_none
    - match_seqtrialcox_moderna_postest
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/postest/none/report_*.csv
        svg: output/models/seqtrialcox/moderna/postest/none/report_*.svg
        png: output/models/seqtrialcox/moderna/postest/none/report_*.png

  model_seqtrialcox_moderna_postest_vax12_type-az-az:
    run: r:latest analysis/model_seqtrialcox.R moderna postest vax12_type-az-az
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/postest/vax12_type-az-az/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/postest/vax12_type-az-az/model_*.txt
        csv: output/models/seqtrialcox/moderna/postest/vax12_type-az-az/model_*.csv

  report_seqtrialcox_moderna_postest_vax12_type-az-az:
    run: r:latest analysis/report_seqtrialcox.R moderna postest vax12_type-az-az
    needs:
    - data_selection
    - model_seqtrialcox_moderna_postest_vax12_type-az-az
    - match_seqtrialcox_moderna_postest
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/postest/vax12_type-az-az/report_*.csv
        svg: output/models/seqtrialcox/moderna/postest/vax12_type-az-az/report_*.svg
        png: output/models/seqtrialcox/moderna/postest/vax12_type-az-az/report_*.png

  model_seqtrialcox_moderna_postest_vax12_type-moderna-moderna:
    run: r:latest analysis/model_seqtrialcox.R moderna postest vax12_type-moderna-moderna
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/postest/vax12_type-moderna-moderna/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/postest/vax12_type-moderna-moderna/model_*.txt
        csv: output/models/seqtrialcox/moderna/postest/vax12_type-moderna-moderna/model_*.csv

  report_seqtrialcox_moderna_postest_vax12_type-moderna-moderna:
    run: r:latest analysis/report_seqtrialcox.R moderna postest vax12_type-moderna-moderna
    needs:
    - data_selection
    - model_seqtrialcox_moderna_postest_vax12_type-moderna-moderna
    - match_seqtrialcox_moderna_postest
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/postest/vax12_type-moderna-moderna/report_*.csv
        svg: output/models/seqtrialcox/moderna/postest/vax12_type-moderna-moderna/report_*.svg
        png: output/models/seqtrialcox/moderna/postest/vax12_type-moderna-moderna/report_*.png

  model_seqtrialcox_moderna_postest_vax12_type-pfizer-pfizer:
    run: r:latest analysis/model_seqtrialcox.R moderna postest vax12_type-pfizer-pfizer
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/postest/vax12_type-pfizer-pfizer/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/postest/vax12_type-pfizer-pfizer/model_*.txt
        csv: output/models/seqtrialcox/moderna/postest/vax12_type-pfizer-pfizer/model_*.csv

  report_seqtrialcox_moderna_postest_vax12_type-pfizer-pfizer:
    run: r:latest analysis/report_seqtrialcox.R moderna postest vax12_type-pfizer-pfizer
    needs:
    - data_selection
    - model_seqtrialcox_moderna_postest_vax12_type-pfizer-pfizer
    - match_seqtrialcox_moderna_postest
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/postest/vax12_type-pfizer-pfizer/report_*.csv
        svg: output/models/seqtrialcox/moderna/postest/vax12_type-pfizer-pfizer/report_*.svg
        png: output/models/seqtrialcox/moderna/postest/vax12_type-pfizer-pfizer/report_*.png

  ## ###  COVID-19 emergency attendance 

  model_seqtrialcox_pfizer_covidemergency_none:
    run: r:latest analysis/model_seqtrialcox.R pfizer covidemergency none
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/covidemergency/none/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/covidemergency/none/model_*.txt
        csv: output/models/seqtrialcox/pfizer/covidemergency/none/model_*.csv

  report_seqtrialcox_pfizer_covidemergency_none:
    run: r:latest analysis/report_seqtrialcox.R pfizer covidemergency none
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_covidemergency_none
    - match_seqtrialcox_pfizer_covidemergency
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/covidemergency/none/report_*.csv
        svg: output/models/seqtrialcox/pfizer/covidemergency/none/report_*.svg
        png: output/models/seqtrialcox/pfizer/covidemergency/none/report_*.png

  model_seqtrialcox_pfizer_covidemergency_vax12_type-az-az:
    run: r:latest analysis/model_seqtrialcox.R pfizer covidemergency vax12_type-az-az
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-az-az/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-az-az/model_*.txt
        csv: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-az-az/model_*.csv

  report_seqtrialcox_pfizer_covidemergency_vax12_type-az-az:
    run: r:latest analysis/report_seqtrialcox.R pfizer covidemergency vax12_type-az-az
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_covidemergency_vax12_type-az-az
    - match_seqtrialcox_pfizer_covidemergency
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-az-az/report_*.csv
        svg: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-az-az/report_*.svg
        png: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-az-az/report_*.png

  model_seqtrialcox_pfizer_covidemergency_vax12_type-moderna-moderna:
    run: r:latest analysis/model_seqtrialcox.R pfizer covidemergency vax12_type-moderna-moderna
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-moderna-moderna/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-moderna-moderna/model_*.txt
        csv: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-moderna-moderna/model_*.csv

  report_seqtrialcox_pfizer_covidemergency_vax12_type-moderna-moderna:
    run: r:latest analysis/report_seqtrialcox.R pfizer covidemergency vax12_type-moderna-moderna
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_covidemergency_vax12_type-moderna-moderna
    - match_seqtrialcox_pfizer_covidemergency
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-moderna-moderna/report_*.csv
        svg: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-moderna-moderna/report_*.svg
        png: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-moderna-moderna/report_*.png

  model_seqtrialcox_pfizer_covidemergency_vax12_type-pfizer-pfizer:
    run: r:latest analysis/model_seqtrialcox.R pfizer covidemergency vax12_type-pfizer-pfizer
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-pfizer-pfizer/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-pfizer-pfizer/model_*.txt
        csv: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-pfizer-pfizer/model_*.csv

  report_seqtrialcox_pfizer_covidemergency_vax12_type-pfizer-pfizer:
    run: r:latest analysis/report_seqtrialcox.R pfizer covidemergency vax12_type-pfizer-pfizer
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_covidemergency_vax12_type-pfizer-pfizer
    - match_seqtrialcox_pfizer_covidemergency
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-pfizer-pfizer/report_*.csv
        svg: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-pfizer-pfizer/report_*.svg
        png: output/models/seqtrialcox/pfizer/covidemergency/vax12_type-pfizer-pfizer/report_*.png

  model_seqtrialcox_moderna_covidemergency_none:
    run: r:latest analysis/model_seqtrialcox.R moderna covidemergency none
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/covidemergency/none/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/covidemergency/none/model_*.txt
        csv: output/models/seqtrialcox/moderna/covidemergency/none/model_*.csv

  report_seqtrialcox_moderna_covidemergency_none:
    run: r:latest analysis/report_seqtrialcox.R moderna covidemergency none
    needs:
    - data_selection
    - model_seqtrialcox_moderna_covidemergency_none
    - match_seqtrialcox_moderna_covidemergency
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/covidemergency/none/report_*.csv
        svg: output/models/seqtrialcox/moderna/covidemergency/none/report_*.svg
        png: output/models/seqtrialcox/moderna/covidemergency/none/report_*.png

  model_seqtrialcox_moderna_covidemergency_vax12_type-az-az:
    run: r:latest analysis/model_seqtrialcox.R moderna covidemergency vax12_type-az-az
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/covidemergency/vax12_type-az-az/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/covidemergency/vax12_type-az-az/model_*.txt
        csv: output/models/seqtrialcox/moderna/covidemergency/vax12_type-az-az/model_*.csv

  report_seqtrialcox_moderna_covidemergency_vax12_type-az-az:
    run: r:latest analysis/report_seqtrialcox.R moderna covidemergency vax12_type-az-az
    needs:
    - data_selection
    - model_seqtrialcox_moderna_covidemergency_vax12_type-az-az
    - match_seqtrialcox_moderna_covidemergency
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/covidemergency/vax12_type-az-az/report_*.csv
        svg: output/models/seqtrialcox/moderna/covidemergency/vax12_type-az-az/report_*.svg
        png: output/models/seqtrialcox/moderna/covidemergency/vax12_type-az-az/report_*.png

  model_seqtrialcox_moderna_covidemergency_vax12_type-moderna-moderna:
    run: r:latest analysis/model_seqtrialcox.R moderna covidemergency vax12_type-moderna-moderna
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/covidemergency/vax12_type-moderna-moderna/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/covidemergency/vax12_type-moderna-moderna/model_*.txt
        csv: output/models/seqtrialcox/moderna/covidemergency/vax12_type-moderna-moderna/model_*.csv

  report_seqtrialcox_moderna_covidemergency_vax12_type-moderna-moderna:
    run: r:latest analysis/report_seqtrialcox.R moderna covidemergency vax12_type-moderna-moderna
    needs:
    - data_selection
    - model_seqtrialcox_moderna_covidemergency_vax12_type-moderna-moderna
    - match_seqtrialcox_moderna_covidemergency
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/covidemergency/vax12_type-moderna-moderna/report_*.csv
        svg: output/models/seqtrialcox/moderna/covidemergency/vax12_type-moderna-moderna/report_*.svg
        png: output/models/seqtrialcox/moderna/covidemergency/vax12_type-moderna-moderna/report_*.png

  model_seqtrialcox_moderna_covidemergency_vax12_type-pfizer-pfizer:
    run: r:latest analysis/model_seqtrialcox.R moderna covidemergency vax12_type-pfizer-pfizer
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/covidemergency/vax12_type-pfizer-pfizer/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/covidemergency/vax12_type-pfizer-pfizer/model_*.txt
        csv: output/models/seqtrialcox/moderna/covidemergency/vax12_type-pfizer-pfizer/model_*.csv

  report_seqtrialcox_moderna_covidemergency_vax12_type-pfizer-pfizer:
    run: r:latest analysis/report_seqtrialcox.R moderna covidemergency vax12_type-pfizer-pfizer
    needs:
    - data_selection
    - model_seqtrialcox_moderna_covidemergency_vax12_type-pfizer-pfizer
    - match_seqtrialcox_moderna_covidemergency
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/covidemergency/vax12_type-pfizer-pfizer/report_*.csv
        svg: output/models/seqtrialcox/moderna/covidemergency/vax12_type-pfizer-pfizer/report_*.svg
        png: output/models/seqtrialcox/moderna/covidemergency/vax12_type-pfizer-pfizer/report_*.png

  ## ###  COVID-19 unplanned admission 

  model_seqtrialcox_pfizer_covidadmitted_none:
    run: r:latest analysis/model_seqtrialcox.R pfizer covidadmitted none
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/covidadmitted/none/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/covidadmitted/none/model_*.txt
        csv: output/models/seqtrialcox/pfizer/covidadmitted/none/model_*.csv

  report_seqtrialcox_pfizer_covidadmitted_none:
    run: r:latest analysis/report_seqtrialcox.R pfizer covidadmitted none
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_covidadmitted_none
    - match_seqtrialcox_pfizer_covidadmitted
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/covidadmitted/none/report_*.csv
        svg: output/models/seqtrialcox/pfizer/covidadmitted/none/report_*.svg
        png: output/models/seqtrialcox/pfizer/covidadmitted/none/report_*.png

  model_seqtrialcox_pfizer_covidadmitted_vax12_type-az-az:
    run: r:latest analysis/model_seqtrialcox.R pfizer covidadmitted vax12_type-az-az
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-az-az/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-az-az/model_*.txt
        csv: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-az-az/model_*.csv

  report_seqtrialcox_pfizer_covidadmitted_vax12_type-az-az:
    run: r:latest analysis/report_seqtrialcox.R pfizer covidadmitted vax12_type-az-az
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_covidadmitted_vax12_type-az-az
    - match_seqtrialcox_pfizer_covidadmitted
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-az-az/report_*.csv
        svg: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-az-az/report_*.svg
        png: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-az-az/report_*.png

  model_seqtrialcox_pfizer_covidadmitted_vax12_type-moderna-moderna:
    run: r:latest analysis/model_seqtrialcox.R pfizer covidadmitted vax12_type-moderna-moderna
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-moderna-moderna/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-moderna-moderna/model_*.txt
        csv: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-moderna-moderna/model_*.csv

  report_seqtrialcox_pfizer_covidadmitted_vax12_type-moderna-moderna:
    run: r:latest analysis/report_seqtrialcox.R pfizer covidadmitted vax12_type-moderna-moderna
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_covidadmitted_vax12_type-moderna-moderna
    - match_seqtrialcox_pfizer_covidadmitted
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-moderna-moderna/report_*.csv
        svg: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-moderna-moderna/report_*.svg
        png: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-moderna-moderna/report_*.png

  model_seqtrialcox_pfizer_covidadmitted_vax12_type-pfizer-pfizer:
    run: r:latest analysis/model_seqtrialcox.R pfizer covidadmitted vax12_type-pfizer-pfizer
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-pfizer-pfizer/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-pfizer-pfizer/model_*.txt
        csv: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-pfizer-pfizer/model_*.csv

  report_seqtrialcox_pfizer_covidadmitted_vax12_type-pfizer-pfizer:
    run: r:latest analysis/report_seqtrialcox.R pfizer covidadmitted vax12_type-pfizer-pfizer
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_covidadmitted_vax12_type-pfizer-pfizer
    - match_seqtrialcox_pfizer_covidadmitted
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-pfizer-pfizer/report_*.csv
        svg: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-pfizer-pfizer/report_*.svg
        png: output/models/seqtrialcox/pfizer/covidadmitted/vax12_type-pfizer-pfizer/report_*.png

  model_seqtrialcox_moderna_covidadmitted_none:
    run: r:latest analysis/model_seqtrialcox.R moderna covidadmitted none
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/covidadmitted/none/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/covidadmitted/none/model_*.txt
        csv: output/models/seqtrialcox/moderna/covidadmitted/none/model_*.csv

  report_seqtrialcox_moderna_covidadmitted_none:
    run: r:latest analysis/report_seqtrialcox.R moderna covidadmitted none
    needs:
    - data_selection
    - model_seqtrialcox_moderna_covidadmitted_none
    - match_seqtrialcox_moderna_covidadmitted
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/covidadmitted/none/report_*.csv
        svg: output/models/seqtrialcox/moderna/covidadmitted/none/report_*.svg
        png: output/models/seqtrialcox/moderna/covidadmitted/none/report_*.png

  model_seqtrialcox_moderna_covidadmitted_vax12_type-az-az:
    run: r:latest analysis/model_seqtrialcox.R moderna covidadmitted vax12_type-az-az
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-az-az/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-az-az/model_*.txt
        csv: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-az-az/model_*.csv

  report_seqtrialcox_moderna_covidadmitted_vax12_type-az-az:
    run: r:latest analysis/report_seqtrialcox.R moderna covidadmitted vax12_type-az-az
    needs:
    - data_selection
    - model_seqtrialcox_moderna_covidadmitted_vax12_type-az-az
    - match_seqtrialcox_moderna_covidadmitted
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-az-az/report_*.csv
        svg: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-az-az/report_*.svg
        png: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-az-az/report_*.png

  model_seqtrialcox_moderna_covidadmitted_vax12_type-moderna-moderna:
    run: r:latest analysis/model_seqtrialcox.R moderna covidadmitted vax12_type-moderna-moderna
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-moderna-moderna/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-moderna-moderna/model_*.txt
        csv: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-moderna-moderna/model_*.csv

  report_seqtrialcox_moderna_covidadmitted_vax12_type-moderna-moderna:
    run: r:latest analysis/report_seqtrialcox.R moderna covidadmitted vax12_type-moderna-moderna
    needs:
    - data_selection
    - model_seqtrialcox_moderna_covidadmitted_vax12_type-moderna-moderna
    - match_seqtrialcox_moderna_covidadmitted
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-moderna-moderna/report_*.csv
        svg: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-moderna-moderna/report_*.svg
        png: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-moderna-moderna/report_*.png

  model_seqtrialcox_moderna_covidadmitted_vax12_type-pfizer-pfizer:
    run: r:latest analysis/model_seqtrialcox.R moderna covidadmitted vax12_type-pfizer-pfizer
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-pfizer-pfizer/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-pfizer-pfizer/model_*.txt
        csv: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-pfizer-pfizer/model_*.csv

  report_seqtrialcox_moderna_covidadmitted_vax12_type-pfizer-pfizer:
    run: r:latest analysis/report_seqtrialcox.R moderna covidadmitted vax12_type-pfizer-pfizer
    needs:
    - data_selection
    - model_seqtrialcox_moderna_covidadmitted_vax12_type-pfizer-pfizer
    - match_seqtrialcox_moderna_covidadmitted
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-pfizer-pfizer/report_*.csv
        svg: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-pfizer-pfizer/report_*.svg
        png: output/models/seqtrialcox/moderna/covidadmitted/vax12_type-pfizer-pfizer/report_*.png

  ## ###  COVID-19 ICU/Critical care admission 

  model_seqtrialcox_pfizer_covidcc_none:
    run: r:latest analysis/model_seqtrialcox.R pfizer covidcc none
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/covidcc/none/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/covidcc/none/model_*.txt
        csv: output/models/seqtrialcox/pfizer/covidcc/none/model_*.csv

  report_seqtrialcox_pfizer_covidcc_none:
    run: r:latest analysis/report_seqtrialcox.R pfizer covidcc none
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_covidcc_none
    - match_seqtrialcox_pfizer_covidcc
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/covidcc/none/report_*.csv
        svg: output/models/seqtrialcox/pfizer/covidcc/none/report_*.svg
        png: output/models/seqtrialcox/pfizer/covidcc/none/report_*.png

  model_seqtrialcox_pfizer_covidcc_vax12_type-az-az:
    run: r:latest analysis/model_seqtrialcox.R pfizer covidcc vax12_type-az-az
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/covidcc/vax12_type-az-az/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/covidcc/vax12_type-az-az/model_*.txt
        csv: output/models/seqtrialcox/pfizer/covidcc/vax12_type-az-az/model_*.csv

  report_seqtrialcox_pfizer_covidcc_vax12_type-az-az:
    run: r:latest analysis/report_seqtrialcox.R pfizer covidcc vax12_type-az-az
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_covidcc_vax12_type-az-az
    - match_seqtrialcox_pfizer_covidcc
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/covidcc/vax12_type-az-az/report_*.csv
        svg: output/models/seqtrialcox/pfizer/covidcc/vax12_type-az-az/report_*.svg
        png: output/models/seqtrialcox/pfizer/covidcc/vax12_type-az-az/report_*.png

  model_seqtrialcox_pfizer_covidcc_vax12_type-moderna-moderna:
    run: r:latest analysis/model_seqtrialcox.R pfizer covidcc vax12_type-moderna-moderna
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/covidcc/vax12_type-moderna-moderna/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/covidcc/vax12_type-moderna-moderna/model_*.txt
        csv: output/models/seqtrialcox/pfizer/covidcc/vax12_type-moderna-moderna/model_*.csv

  report_seqtrialcox_pfizer_covidcc_vax12_type-moderna-moderna:
    run: r:latest analysis/report_seqtrialcox.R pfizer covidcc vax12_type-moderna-moderna
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_covidcc_vax12_type-moderna-moderna
    - match_seqtrialcox_pfizer_covidcc
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/covidcc/vax12_type-moderna-moderna/report_*.csv
        svg: output/models/seqtrialcox/pfizer/covidcc/vax12_type-moderna-moderna/report_*.svg
        png: output/models/seqtrialcox/pfizer/covidcc/vax12_type-moderna-moderna/report_*.png

  model_seqtrialcox_pfizer_covidcc_vax12_type-pfizer-pfizer:
    run: r:latest analysis/model_seqtrialcox.R pfizer covidcc vax12_type-pfizer-pfizer
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/covidcc/vax12_type-pfizer-pfizer/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/covidcc/vax12_type-pfizer-pfizer/model_*.txt
        csv: output/models/seqtrialcox/pfizer/covidcc/vax12_type-pfizer-pfizer/model_*.csv

  report_seqtrialcox_pfizer_covidcc_vax12_type-pfizer-pfizer:
    run: r:latest analysis/report_seqtrialcox.R pfizer covidcc vax12_type-pfizer-pfizer
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_covidcc_vax12_type-pfizer-pfizer
    - match_seqtrialcox_pfizer_covidcc
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/covidcc/vax12_type-pfizer-pfizer/report_*.csv
        svg: output/models/seqtrialcox/pfizer/covidcc/vax12_type-pfizer-pfizer/report_*.svg
        png: output/models/seqtrialcox/pfizer/covidcc/vax12_type-pfizer-pfizer/report_*.png

  model_seqtrialcox_moderna_covidcc_none:
    run: r:latest analysis/model_seqtrialcox.R moderna covidcc none
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/covidcc/none/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/covidcc/none/model_*.txt
        csv: output/models/seqtrialcox/moderna/covidcc/none/model_*.csv

  report_seqtrialcox_moderna_covidcc_none:
    run: r:latest analysis/report_seqtrialcox.R moderna covidcc none
    needs:
    - data_selection
    - model_seqtrialcox_moderna_covidcc_none
    - match_seqtrialcox_moderna_covidcc
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/covidcc/none/report_*.csv
        svg: output/models/seqtrialcox/moderna/covidcc/none/report_*.svg
        png: output/models/seqtrialcox/moderna/covidcc/none/report_*.png

  model_seqtrialcox_moderna_covidcc_vax12_type-az-az:
    run: r:latest analysis/model_seqtrialcox.R moderna covidcc vax12_type-az-az
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/covidcc/vax12_type-az-az/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/covidcc/vax12_type-az-az/model_*.txt
        csv: output/models/seqtrialcox/moderna/covidcc/vax12_type-az-az/model_*.csv

  report_seqtrialcox_moderna_covidcc_vax12_type-az-az:
    run: r:latest analysis/report_seqtrialcox.R moderna covidcc vax12_type-az-az
    needs:
    - data_selection
    - model_seqtrialcox_moderna_covidcc_vax12_type-az-az
    - match_seqtrialcox_moderna_covidcc
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/covidcc/vax12_type-az-az/report_*.csv
        svg: output/models/seqtrialcox/moderna/covidcc/vax12_type-az-az/report_*.svg
        png: output/models/seqtrialcox/moderna/covidcc/vax12_type-az-az/report_*.png

  model_seqtrialcox_moderna_covidcc_vax12_type-moderna-moderna:
    run: r:latest analysis/model_seqtrialcox.R moderna covidcc vax12_type-moderna-moderna
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/covidcc/vax12_type-moderna-moderna/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/covidcc/vax12_type-moderna-moderna/model_*.txt
        csv: output/models/seqtrialcox/moderna/covidcc/vax12_type-moderna-moderna/model_*.csv

  report_seqtrialcox_moderna_covidcc_vax12_type-moderna-moderna:
    run: r:latest analysis/report_seqtrialcox.R moderna covidcc vax12_type-moderna-moderna
    needs:
    - data_selection
    - model_seqtrialcox_moderna_covidcc_vax12_type-moderna-moderna
    - match_seqtrialcox_moderna_covidcc
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/covidcc/vax12_type-moderna-moderna/report_*.csv
        svg: output/models/seqtrialcox/moderna/covidcc/vax12_type-moderna-moderna/report_*.svg
        png: output/models/seqtrialcox/moderna/covidcc/vax12_type-moderna-moderna/report_*.png

  model_seqtrialcox_moderna_covidcc_vax12_type-pfizer-pfizer:
    run: r:latest analysis/model_seqtrialcox.R moderna covidcc vax12_type-pfizer-pfizer
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/covidcc/vax12_type-pfizer-pfizer/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/covidcc/vax12_type-pfizer-pfizer/model_*.txt
        csv: output/models/seqtrialcox/moderna/covidcc/vax12_type-pfizer-pfizer/model_*.csv

  report_seqtrialcox_moderna_covidcc_vax12_type-pfizer-pfizer:
    run: r:latest analysis/report_seqtrialcox.R moderna covidcc vax12_type-pfizer-pfizer
    needs:
    - data_selection
    - model_seqtrialcox_moderna_covidcc_vax12_type-pfizer-pfizer
    - match_seqtrialcox_moderna_covidcc
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/covidcc/vax12_type-pfizer-pfizer/report_*.csv
        svg: output/models/seqtrialcox/moderna/covidcc/vax12_type-pfizer-pfizer/report_*.svg
        png: output/models/seqtrialcox/moderna/covidcc/vax12_type-pfizer-pfizer/report_*.png

  ## ###  COVID-19 death 

  model_seqtrialcox_pfizer_coviddeath_none:
    run: r:latest analysis/model_seqtrialcox.R pfizer coviddeath none
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/coviddeath/none/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/coviddeath/none/model_*.txt
        csv: output/models/seqtrialcox/pfizer/coviddeath/none/model_*.csv

  report_seqtrialcox_pfizer_coviddeath_none:
    run: r:latest analysis/report_seqtrialcox.R pfizer coviddeath none
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_coviddeath_none
    - match_seqtrialcox_pfizer_coviddeath
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/coviddeath/none/report_*.csv
        svg: output/models/seqtrialcox/pfizer/coviddeath/none/report_*.svg
        png: output/models/seqtrialcox/pfizer/coviddeath/none/report_*.png

  model_seqtrialcox_pfizer_coviddeath_vax12_type-az-az:
    run: r:latest analysis/model_seqtrialcox.R pfizer coviddeath vax12_type-az-az
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-az-az/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-az-az/model_*.txt
        csv: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-az-az/model_*.csv

  report_seqtrialcox_pfizer_coviddeath_vax12_type-az-az:
    run: r:latest analysis/report_seqtrialcox.R pfizer coviddeath vax12_type-az-az
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_coviddeath_vax12_type-az-az
    - match_seqtrialcox_pfizer_coviddeath
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-az-az/report_*.csv
        svg: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-az-az/report_*.svg
        png: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-az-az/report_*.png

  model_seqtrialcox_pfizer_coviddeath_vax12_type-moderna-moderna:
    run: r:latest analysis/model_seqtrialcox.R pfizer coviddeath vax12_type-moderna-moderna
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-moderna-moderna/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-moderna-moderna/model_*.txt
        csv: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-moderna-moderna/model_*.csv

  report_seqtrialcox_pfizer_coviddeath_vax12_type-moderna-moderna:
    run: r:latest analysis/report_seqtrialcox.R pfizer coviddeath vax12_type-moderna-moderna
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_coviddeath_vax12_type-moderna-moderna
    - match_seqtrialcox_pfizer_coviddeath
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-moderna-moderna/report_*.csv
        svg: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-moderna-moderna/report_*.svg
        png: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-moderna-moderna/report_*.png

  model_seqtrialcox_pfizer_coviddeath_vax12_type-pfizer-pfizer:
    run: r:latest analysis/model_seqtrialcox.R pfizer coviddeath vax12_type-pfizer-pfizer
    needs:
    - match_seqtrialcox_pfizer
    - merge_seqtrialcox_pfizer
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-pfizer-pfizer/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-pfizer-pfizer/model_*.txt
        csv: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-pfizer-pfizer/model_*.csv

  report_seqtrialcox_pfizer_coviddeath_vax12_type-pfizer-pfizer:
    run: r:latest analysis/report_seqtrialcox.R pfizer coviddeath vax12_type-pfizer-pfizer
    needs:
    - data_selection
    - model_seqtrialcox_pfizer_coviddeath_vax12_type-pfizer-pfizer
    - match_seqtrialcox_pfizer_coviddeath
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-pfizer-pfizer/report_*.csv
        svg: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-pfizer-pfizer/report_*.svg
        png: output/models/seqtrialcox/pfizer/coviddeath/vax12_type-pfizer-pfizer/report_*.png

  model_seqtrialcox_moderna_coviddeath_none:
    run: r:latest analysis/model_seqtrialcox.R moderna coviddeath none
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/coviddeath/none/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/coviddeath/none/model_*.txt
        csv: output/models/seqtrialcox/moderna/coviddeath/none/model_*.csv

  report_seqtrialcox_moderna_coviddeath_none:
    run: r:latest analysis/report_seqtrialcox.R moderna coviddeath none
    needs:
    - data_selection
    - model_seqtrialcox_moderna_coviddeath_none
    - match_seqtrialcox_moderna_coviddeath
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/coviddeath/none/report_*.csv
        svg: output/models/seqtrialcox/moderna/coviddeath/none/report_*.svg
        png: output/models/seqtrialcox/moderna/coviddeath/none/report_*.png

  model_seqtrialcox_moderna_coviddeath_vax12_type-az-az:
    run: r:latest analysis/model_seqtrialcox.R moderna coviddeath vax12_type-az-az
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/coviddeath/vax12_type-az-az/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/coviddeath/vax12_type-az-az/model_*.txt
        csv: output/models/seqtrialcox/moderna/coviddeath/vax12_type-az-az/model_*.csv

  report_seqtrialcox_moderna_coviddeath_vax12_type-az-az:
    run: r:latest analysis/report_seqtrialcox.R moderna coviddeath vax12_type-az-az
    needs:
    - data_selection
    - model_seqtrialcox_moderna_coviddeath_vax12_type-az-az
    - match_seqtrialcox_moderna_coviddeath
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/coviddeath/vax12_type-az-az/report_*.csv
        svg: output/models/seqtrialcox/moderna/coviddeath/vax12_type-az-az/report_*.svg
        png: output/models/seqtrialcox/moderna/coviddeath/vax12_type-az-az/report_*.png

  model_seqtrialcox_moderna_coviddeath_vax12_type-moderna-moderna:
    run: r:latest analysis/model_seqtrialcox.R moderna coviddeath vax12_type-moderna-moderna
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/coviddeath/vax12_type-moderna-moderna/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/coviddeath/vax12_type-moderna-moderna/model_*.txt
        csv: output/models/seqtrialcox/moderna/coviddeath/vax12_type-moderna-moderna/model_*.csv

  report_seqtrialcox_moderna_coviddeath_vax12_type-moderna-moderna:
    run: r:latest analysis/report_seqtrialcox.R moderna coviddeath vax12_type-moderna-moderna
    needs:
    - data_selection
    - model_seqtrialcox_moderna_coviddeath_vax12_type-moderna-moderna
    - match_seqtrialcox_moderna_coviddeath
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/coviddeath/vax12_type-moderna-moderna/report_*.csv
        svg: output/models/seqtrialcox/moderna/coviddeath/vax12_type-moderna-moderna/report_*.svg
        png: output/models/seqtrialcox/moderna/coviddeath/vax12_type-moderna-moderna/report_*.png

  model_seqtrialcox_moderna_coviddeath_vax12_type-pfizer-pfizer:
    run: r:latest analysis/model_seqtrialcox.R moderna coviddeath vax12_type-pfizer-pfizer
    needs:
    - match_seqtrialcox_moderna
    - merge_seqtrialcox_moderna
    - data_selection
    - data_process_long
    outputs:
      highly_sensitive:
        rds: output/models/seqtrialcox/moderna/coviddeath/vax12_type-pfizer-pfizer/model_*.rds
      moderately_sensitive:
        txt: output/models/seqtrialcox/moderna/coviddeath/vax12_type-pfizer-pfizer/model_*.txt
        csv: output/models/seqtrialcox/moderna/coviddeath/vax12_type-pfizer-pfizer/model_*.csv

  report_seqtrialcox_moderna_coviddeath_vax12_type-pfizer-pfizer:
    run: r:latest analysis/report_seqtrialcox.R moderna coviddeath vax12_type-pfizer-pfizer
    needs:
    - data_selection
    - model_seqtrialcox_moderna_coviddeath_vax12_type-pfizer-pfizer
    - match_seqtrialcox_moderna_coviddeath
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/moderna/coviddeath/vax12_type-pfizer-pfizer/report_*.csv
        svg: output/models/seqtrialcox/moderna/coviddeath/vax12_type-pfizer-pfizer/report_*.svg
        png: output/models/seqtrialcox/moderna/coviddeath/vax12_type-pfizer-pfizer/report_*.png

  combine_seqtrialcox:
    run: r:latest analysis/combine_seqtrialcox.R
    needs:
    - match_seqtrialcox_pfizer_postest_none
    - match_seqtrialcox_pfizer_postest_vax12_type-az-az
    - match_seqtrialcox_pfizer_postest_vax12_type-moderna-moderna
    - match_seqtrialcox_pfizer_postest_vax12_type-pfizer-pfizer
    - match_seqtrialcox_pfizer_covidemergency_none
    - match_seqtrialcox_pfizer_covidemergency_vax12_type-az-az
    - match_seqtrialcox_pfizer_covidemergency_vax12_type-moderna-moderna
    - match_seqtrialcox_pfizer_covidemergency_vax12_type-pfizer-pfizer
    - match_seqtrialcox_pfizer_coviddeath_none
    - match_seqtrialcox_pfizer_coviddeath_vax12_type-az-az
    - match_seqtrialcox_pfizer_coviddeath_vax12_type-moderna-moderna
    - match_seqtrialcox_pfizer_coviddeath_vax12_type-pfizer-pfizer
    - match_seqtrialcox_moderna_postest_none
    - match_seqtrialcox_moderna_postest_vax12_type-az-az
    - match_seqtrialcox_moderna_postest_vax12_type-moderna-moderna
    - match_seqtrialcox_moderna_postest_vax12_type-pfizer-pfizer
    - match_seqtrialcox_moderna_covidemergency_none
    - match_seqtrialcox_moderna_covidemergency_vax12_type-az-az
    - match_seqtrialcox_moderna_covidemergency_vax12_type-moderna-moderna
    - match_seqtrialcox_moderna_covidemergency_vax12_type-pfizer-pfizer
    - match_seqtrialcox_moderna_coviddeath_none
    - match_seqtrialcox_moderna_coviddeath_vax12_type-az-az
    - match_seqtrialcox_moderna_coviddeath_vax12_type-moderna-moderna
    - match_seqtrialcox_moderna_coviddeath_vax12_type-pfizer-pfizer
    - merge_seqtrialcox_pfizer_postest_none
    - merge_seqtrialcox_pfizer_postest_vax12_type-az-az
    - merge_seqtrialcox_pfizer_postest_vax12_type-moderna-moderna
    - merge_seqtrialcox_pfizer_postest_vax12_type-pfizer-pfizer
    - merge_seqtrialcox_pfizer_covidemergency_none
    - merge_seqtrialcox_pfizer_covidemergency_vax12_type-az-az
    - merge_seqtrialcox_pfizer_covidemergency_vax12_type-moderna-moderna
    - merge_seqtrialcox_pfizer_covidemergency_vax12_type-pfizer-pfizer
    - merge_seqtrialcox_pfizer_coviddeath_none
    - merge_seqtrialcox_pfizer_coviddeath_vax12_type-az-az
    - merge_seqtrialcox_pfizer_coviddeath_vax12_type-moderna-moderna
    - merge_seqtrialcox_pfizer_coviddeath_vax12_type-pfizer-pfizer
    - merge_seqtrialcox_moderna_postest_none
    - merge_seqtrialcox_moderna_postest_vax12_type-az-az
    - merge_seqtrialcox_moderna_postest_vax12_type-moderna-moderna
    - merge_seqtrialcox_moderna_postest_vax12_type-pfizer-pfizer
    - merge_seqtrialcox_moderna_covidemergency_none
    - merge_seqtrialcox_moderna_covidemergency_vax12_type-az-az
    - merge_seqtrialcox_moderna_covidemergency_vax12_type-moderna-moderna
    - merge_seqtrialcox_moderna_covidemergency_vax12_type-pfizer-pfizer
    - merge_seqtrialcox_moderna_coviddeath_none
    - merge_seqtrialcox_moderna_coviddeath_vax12_type-az-az
    - merge_seqtrialcox_moderna_coviddeath_vax12_type-moderna-moderna
    - merge_seqtrialcox_moderna_coviddeath_vax12_type-pfizer-pfizer
    - model_seqtrialcox_pfizer_postest
    - model_seqtrialcox_pfizer_covidemergency
    - model_seqtrialcox_pfizer_covidadmitted
    - model_seqtrialcox_pfizer_covidcc
    - model_seqtrialcox_pfizer_coviddeath
    - model_seqtrialcox_moderna_postest
    - model_seqtrialcox_moderna_covidemergency
    - model_seqtrialcox_moderna_covidadmitted
    - model_seqtrialcox_moderna_covidcc
    - model_seqtrialcox_moderna_coviddeath
    - report_seqtrialcox_pfizer_postest
    - report_seqtrialcox_pfizer_covidemergency
    - report_seqtrialcox_pfizer_covidadmitted
    - report_seqtrialcox_pfizer_covidcc
    - report_seqtrialcox_pfizer_coviddeath
    - report_seqtrialcox_moderna_postest
    - report_seqtrialcox_moderna_covidemergency
    - report_seqtrialcox_moderna_covidadmitted
    - report_seqtrialcox_moderna_covidcc
    - report_seqtrialcox_moderna_coviddeath
    outputs:
      moderately_sensitive:
        csv: output/models/seqtrialcox/combined/*.csv
        png: output/models/seqtrialcox/combined/*.png
        pdf: output/models/seqtrialcox/combined/*.pdf
        svg: output/models/seqtrialcox/combined/*.svg
        html: output/models/seqtrialcox/combined/*.html

  ## # # # # # # # # # # # # # # # # # # # 
  ## Manuscript 
  ## # # # # # # # # # # # # # # # # # # # 

  manuscript_objects:
    run: r:latest analysis/manuscript_objects.R
    needs:
    - data_selection
    - descriptive_table1
    - descriptive_vaxdate
    - match_seqtrialcox_pfizer
    - match_seqtrialcox_moderna
    - combine_seqtrialcox
    outputs:
      moderately_sensitive:
        csv: output/manuscript-objects/*.csv
        png: output/manuscript-objects/*.png

